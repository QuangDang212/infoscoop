<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    
<hibernate-mapping package="org.infoscoop.dao.model">

    <class name="WidgetConf" table="IS_WIDGETCONFS">

        <composite-id name="Id" class="WidgetConfPK">
            <key-property
                name="type"
                column="type"
                type="string"
            />
            <key-property
                name="Squareid"
                column="square_id"
                type="string"
                length="64"
            />
        </composite-id>

        <property name="data" column="data" type="text"/>
    </class>
    <sql-query name="is_widgetconfs.copySquare">
        <![CDATA[
INSERT
	INTO
		IS_WIDGETCONFS(
			type,
			data,
			square_id
		)
	SELECT
		w.type,
		w.data,
		:squareId
	FROM
		IS_WIDGETCONFS as w
	WHERE
		w.square_id = :defaultSquareId
		]]>
    </sql-query>
</hibernate-mapping>
