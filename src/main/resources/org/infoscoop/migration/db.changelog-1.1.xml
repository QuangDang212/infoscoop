<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!--Issue 14007-->
	<!--CREATE INDEX is_widgets_menuId on IS_WIDGETS(menuId);-->
	<!--CREATE INDEX is_widgets_createDate on IS_WIDGETS(createDate);-->
	<!--CREATE INDEX is_widgets_isStatic on IS_WIDGETS(isStatic);-->
    <changeSet id="infoscoop330_14007_1" author="mikami">
        <preConditions onFail="MARK_RAN" onFailMessage="skip infoscoop330_14007_1">
			<or>
				<dbms type="oracle"></dbms>
				<dbms type="mysql"></dbms>
			</or>
        </preConditions>
	    <createIndex indexName="is_widgets_menuId" schemaName="${migration.defaultSchema}" tableName="IS_WIDGETS" tablespace="${.tablespace}">
        	<column name="menuId" type="varchar(256)"/>
    	</createIndex>
	    <createIndex indexName="is_widgets_createDate" schemaName="${migration.defaultSchema}" tableName="IS_WIDGETS" tablespace="${.tablespace}">
        	<column name="createDate" type="number(18)"/>
    	</createIndex>
	    <createIndex indexName="is_widgets_isStatic" schemaName="${migration.defaultSchema}" tableName="IS_WIDGETS" tablespace="${.tablespace}">
        	<column name="isStatic" type="integer"/>
    	</createIndex>
    </changeSet>
    <!--Issue 14007-->
    <!--UPDATE IS_TABLAYOUTS SET templastmodified = NULL;-->
    <changeSet id="infoscoop330_14007_2" author="mikami">
        <preConditions onFail="MARK_RAN" onFailMessage="skip infoscoop330_14007_2">
        	<dbms type="mysql"></dbms>
            <tableExists schemaName="${migration.defaultSchema}" tableName="IS_TABLAYOUTS"/>
		</preConditions>
        <update tableName="IS_TABLAYOUTS">
            <column name="templastmodified" value="NULL"/>
        </update>
    </changeSet>    
</databaseChangeLog>