<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="org.infoscoop.api.dao.model">
 <class name="OAuth2ProviderClientDetail" table="IS_OAUTHPROVIDER_CLIENT">
  <meta attribute="sync-DAO">false</meta>
  <composite-id name="Id" class="OAuth2ProviderClientDetailPK">
      <key-property
          name="id"
          column="id"
          type="string"
          length="255"
      />
      <key-property
          name="Squareid"
          column="square_id"
          type="string"
          length="64"
      />
  </composite-id>
  <property column="title" generated="never" lazy="false" length="255"
   name="title" not-null="true" type="string"/>
  <property column="resource_ids" generated="never" lazy="false"
   length="255" name="resourceIds" type="string"/>
  <property column="secret" generated="never" lazy="false" length="255"
   name="secret" not-null="true" type="string"/>
  <property column="scope" generated="never" lazy="false" length="255"
   name="scope" type="string"/>
  <property column="grant_types" generated="never" lazy="false"
   length="255" name="grantTypes" not-null="true" type="string"/>
  <property column="redirect_url" generated="never" lazy="false"
   length="255" name="redirectUrl" type="string"/>
  <property column="authorities" generated="never" lazy="false"
   length="255" name="authorities" type="string"/>
  <property column="delete_flg" generated="never" lazy="false"
   name="deleteFlg" type="boolean"/>
  <property column="access_token_validity" generated="never"
   lazy="false" name="accessTokenValidity" type="integer"/>
  <property column="refresh_token_validity" generated="never"
   lazy="false" name="refreshTokenValidity" type="integer"/>
  <property column="additional_information" generated="never"
   lazy="false" name="additionalInformation" type="string"/>
 </class>
    <sql-query name="is_oauthprovider_client.copySquare">
        <![CDATA[
INSERT
	INTO
		IS_OAUTHPROVIDER_CLIENT(
			id,
			title,
			resource_ids,
			secret,
			scope,
			grant_types,
			redirect_url,
			authorities,
			delete_flg,
			access_token_validity,
			refresh_token_validity,
			additional_information,
			square_id
		)
	SELECT
		opc.id,
		opc.title,
		opc.resource_ids,
		opc.secret,
		opc.scope,
		opc.grant_types,
		opc.redirect_url,
		opc.authorities,
		opc.delete_flg,
		opc.access_token_validity,
		opc.refresh_token_validity,
		opc.additional_information,
		:squareId
	FROM
		IS_OAUTHPROVIDER_CLIENT as opc
	WHERE
		opc.square_id = :defaultSquareId
		]]>
    </sql-query>
</hibernate-mapping>
